---
interface Props {
  hideCta?: boolean;
}

const { hideCta = false } = Astro.props;

const phoneLines = [
  { label: 'Admissions', number: '(786) 826-7552', href: 'tel:7868267552' },
  { label: 'Medical', number: '(786) 826-7553', href: 'tel:7868267553' },
  { label: 'Sales', number: '(786) 826-7554', href: 'tel:7868267554' },
];
---

<footer class="site-footer">
  {!hideCta && (
    <div class="footer-cta">
      <div class="footer-cta__inner">
        <div class="footer-cta__content">
          <h2 class="footer-cta__heading">Take the First Step Toward a New Life</h2>
          <p class="footer-cta__text">Our admissions team is available 24/7 to answer your questions and guide you through the process.</p>
        </div>
        <div class="footer-cta__actions">
          <div class="footer-cta__phone-switcher" data-phone-switcher>
            <div class="footer-cta__tabs" role="tablist">
              {phoneLines.map((line, i) => (
                <button
                  class={`footer-cta__tab ${i === 0 ? 'is-active' : ''}`}
                  role="tab"
                  aria-selected={i === 0 ? 'true' : 'false'}
                  data-index={i}
                >
                  {line.label}
                </button>
              ))}
            </div>
            <a href={phoneLines[0].href} class="footer-cta__phone" data-phone-link>
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
              <span data-phone-number>{phoneLines[0].number}</span>
            </a>
          </div>
          <a href="/contact" class="footer-cta__btn">Contact Us</a>
        </div>
      </div>
    </div>
  )}

  <div class="footer-main">
    <div class="footer-main__inner">
      <div class="footer-brand">
        <a href="/" class="footer-brand__logo" aria-label="Southern Winds Hospital">
          <img src="/images/logo.svg" style="width:100px; filter: brightness(0) invert(1);" />
        </a>
        <p class="footer-brand__desc">
          Providing compassionate, evidence-based mental health care with over 30 years of experience. Nationally accredited behavioral programs for adults, adolescents, and children.
        </p>
        <div class="footer-brand__social">
          <a href="https://instagram.com/southernwindsh" class="footer-brand__social-link" aria-label="Instagram">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>
          </a>
          <a href="https://facebook.com/southernwindshospital" class="footer-brand__social-link" aria-label="Facebook">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>
          </a>
        </div>
      </div>

      <nav class="footer-nav" aria-label="Footer navigation">
        <div class="footer-nav__group">
          <h3 class="footer-nav__heading">Site Pages</h3>
          <ul class="footer-nav__list" role="list">
            <li><a href="/" class="footer-nav__link">Home</a></li>
            <li><a href="/programs" class="footer-nav__link">Programs</a></li>
            <li><a href="/what-we-treat" class="footer-nav__link">What We Treat</a></li>
            <li><a href="/insurance" class="footer-nav__link">Insurance</a></li>
            <li><a href="/admissions" class="footer-nav__link">Admissions</a></li>
          </ul>
        </div>
        <div class="footer-nav__group">
          <h3 class="footer-nav__heading">Company</h3>
          <ul class="footer-nav__list" role="list">
            <li><a href="/about" class="footer-nav__link">About Us</a></li>
            <li><a href="/careers" class="footer-nav__link">Careers</a></li>
            <li><a href="/residency" class="footer-nav__link">Residency Program</a></li>
            <li><a href="/price-transparency" class="footer-nav__link">Price Transparency</a></li>
            <li><a href="/privacy" class="footer-nav__link">Privacy Practices</a></li>
          </ul>
        </div>
        <div class="footer-nav__group">
          <h3 class="footer-nav__heading">Contact</h3>
          <address class="footer-contact">
            <a href="mailto:web@southernwindshospital.com" class="footer-contact__item">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
              web@southernwindshospital.com
            </a>
            <div class="footer-contact__phones">
              <a href="tel:7868267552" class="footer-contact__item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
                <span>Admissions: 786-826-7552</span>
              </a>
              <a href="tel:7868267553" class="footer-contact__item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
                <span>Medical: 786-826-7553</span>
              </a>
              <a href="tel:7868267554" class="footer-contact__item">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
                <span>Sales: 786-826-7554</span>
              </a>
            </div>
            <span class="footer-contact__item">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
              4225 W 20th Ave, Hialeah FL 33012
            </span>
          </address>
        </div>
      </nav>
    </div>
  </div>

  <div class="footer-bottom">
    <div class="footer-bottom__inner">
      <p class="footer-bottom__copy">&copy; 2026 Southern Winds Hospital. All rights reserved.</p>
      <p class="footer-bottom__hipaa">HIPAA Compliant</p>
    </div>
  </div>
</footer>

<script define:vars={{ phoneLines }}>
  document.querySelectorAll('[data-phone-switcher]').forEach((switcher) => {
    const tabs = switcher.querySelectorAll('[role="tab"]');
    const phoneLink = switcher.querySelector('[data-phone-link]');
    const phoneNumber = switcher.querySelector('[data-phone-number]');

    tabs.forEach((tab) => {
      tab.addEventListener('click', () => {
        const index = parseInt(tab.dataset.index);
        const line = phoneLines[index];

        tabs.forEach((t) => {
          t.classList.remove('is-active');
          t.setAttribute('aria-selected', 'false');
        });
        tab.classList.add('is-active');
        tab.setAttribute('aria-selected', 'true');

        phoneLink.href = line.href;
        phoneNumber.textContent = line.number;
      });
    });
  });
</script>

<style lang="scss">
  @use '../styles/partials/variables' as *;
  @use '../styles/partials/mixins' as *;

  .footer-cta {
    background: url('/images/waves.png') center / cover no-repeat;
    position: relative;
    overflow: hidden;

    &::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(10, 74, 122, 0.92) 0%, rgb(13 92 153 / 58%) 50%, rgba(26, 143, 227, 0.9) 100%);
      z-index: 1;
    }

    &__inner {
      @include container;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: $space-lg;
      padding-block: $space-2xl;
      text-align: center;
      position: relative;
      z-index: 2;

      @include respond(lg) {
        flex-direction: row;
        justify-content: space-between;
        text-align: left;
        padding-block: $space-3xl;
      }
    }

    &__heading {
      font-family: $font-heading;
      font-size: $fs-2xl;
      font-weight: 700;
      color: $color-white;
      margin-bottom: $space-sm;

      @include respond(md) {
        font-size: $fs-3xl;
      }
    }

    &__text {
      font-family: $font-body;
      font-size: $fs-base;
      color: rgba($color-white, 0.8);
      max-width: 480px;

      @include respond(md) {
        font-size: $fs-md;
      }
    }

    &__actions {
      display: flex;
      flex-direction: column;
      gap: $space-md;
      flex-shrink: 0;
      align-items: center;

      @include respond(lg) {
        align-items: flex-end;
      }
    }

    &__phone-switcher {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: $space-sm;

      @include respond(lg) {
        align-items: flex-end;
      }
    }

    &__tabs {
      display: flex;
      background: rgba($color-white, 0.12);
      border-radius: 100px;
      padding: 3px;
    }

    &__tab {
      appearance: none;
      -webkit-appearance: none;
      outline: none;
      margin: 0;
      padding: 6px $space-md;
      font-family: $font-body;
      font-size: $fs-xs;
      font-weight: 600;
      line-height: 1.4;
      color: rgba($color-white, 0.65);
      background: transparent;
      border: none;
      border-radius: 100px;
      cursor: pointer;
      transition: all 0.2s ease;
      white-space: nowrap;

      &:hover {
        color: $color-white;
      }

      &.is-active {
        background: $color-white;
        color: $color-primary-dark;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
      }
    }

    &__phone {
      display: inline-flex;
      align-items: center;
      gap: $space-sm;
      padding: $space-md $space-xl;
      font-family: $font-body;
      font-size: $fs-md;
      font-weight: 700;
      color: $color-primary-dark;
      background-color: $color-white;
      border-radius: $radius-sm;
      transition: all $transition-base;
      white-space: nowrap;

      &:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
      }
    }

    &__btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: $space-md $space-xl;
      font-family: $font-body;
      font-size: $fs-sm;
      font-weight: 600;
      color: $color-white;
      border: 2px solid rgba($color-white, 0.4);
      border-radius: $radius-sm;
      transition: all $transition-base;
      white-space: nowrap;

      &:hover {
        border-color: $color-white;
        background-color: rgba($color-white, 0.1);
      }
    }
  }

  .footer-main {
    background-color: $color-navy;
    padding-block: $space-xl;

    &__inner {
      @include container;
      display: grid;
      grid-template-columns: 1fr;
      gap: $space-3xl;

      @include respond(lg) {
        grid-template-columns: 1.2fr 2fr;
        gap: $space-4xl;
      }
    }
  }

  .footer-brand {
    &__logo {
      display: inline-flex;
      align-items: center;
      gap: $space-sm;
      margin-bottom: $space-xl;
    }

    &__mark {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, $color-primary-light, $color-primary);
      color: $color-white;
      font-family: $font-heading;
      font-size: $fs-base;
      font-weight: 700;
      border-radius: $radius-md;
    }

    &__text {
      display: flex;
      flex-direction: column;
      line-height: 1.1;
    }

    &__name {
      font-family: $font-heading;
      font-size: $fs-md;
      font-weight: 700;
      color: $color-white;
    }

    &__tagline {
      font-family: $font-body;
      font-size: $fs-xs;
      font-weight: 500;
      color: $color-primary-light;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    &__desc {
      font-family: $font-body;
      font-size: $fs-sm;
      line-height: 1.7;
      color: rgba($color-white, 0.6);
      max-width: 360px;
      margin-bottom: $space-xl;
    }

    &__social {
      display: flex;
      gap: $space-md;
    }

    &__social-link {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border: 1px solid rgba($color-white, 0.15);
      border-radius: $radius-sm;
      color: rgba($color-white, 0.6);
      transition: all $transition-base;

      &:hover {
        color: $color-white;
        border-color: $color-primary-light;
        background-color: rgba($color-primary-light, 0.1);
      }
    }
  }

  .footer-nav {
    display: grid;
    grid-template-columns: 1fr;
    gap: $space-2xl;

    @include respond(sm) {
      grid-template-columns: repeat(2, 1fr);
    }

    @include respond(lg) {
      grid-template-columns: repeat(3, 1fr);
    }

    &__heading {
      font-family: $font-body;
      font-size: $fs-xs;
      font-weight: 700;
      color: rgba($color-white, 0.4);
      letter-spacing: 0.12em;
      text-transform: uppercase;
      margin-bottom: $space-lg;
    }

    &__list {
      display: flex;
      flex-direction: column;
      gap: $space-sm;
    }

    &__link {
      font-family: $font-body;
      font-size: $fs-sm;
      color: rgba($color-white, 0.7);
      transition: color $transition-fast;
      padding-block: 2px;

      &:hover {
        color: $color-white;
      }
    }
  }

  .footer-contact {
    display: flex;
    flex-direction: column;
    gap: $space-md;
    font-style: normal;

    &__phones {
      display: flex;
      flex-direction: column;
      gap: $space-sm;
    }

    &__item {
      display: flex;
      align-items: flex-start;
      gap: $space-sm;
      font-family: $font-body;
      font-size: $fs-sm;
      color: rgba($color-white, 0.7);
      transition: color $transition-fast;

      svg {
        flex-shrink: 0;
        margin-top: 2px;
      }

      &:hover {
        color: $color-white;
      }
    }
  }

  .footer-bottom {
    background-color: darken($color-navy, 3%);
    padding-block: $space-lg;

    &__inner {
      @include container;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: $space-sm;
      text-align: center;

      @include respond(md) {
        flex-direction: row;
        justify-content: space-between;
      }
    }

    &__copy {
      font-family: $font-body;
      font-size: $fs-xs;
      color: rgba($color-white, 0.4);
    }

    &__hipaa {
      font-family: $font-body;
      font-size: $fs-xs;
      font-weight: 600;
      color: rgba($color-white, 0.4);
      letter-spacing: 0.05em;
    }
  }
</style>